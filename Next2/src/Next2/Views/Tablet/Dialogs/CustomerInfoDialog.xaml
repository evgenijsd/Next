<?xml version="1.0" encoding="utf-8" ?>
<rg:PopupPage
    xmlns="http://xamarin.com/schemas/2014/forms"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:xct="http://xamarin.com/schemas/2020/toolkit"
    xmlns:dialogs="clr-namespace:Next2.ViewModels.Dialogs"
    xmlns:rg="clr-namespace:Rg.Plugins.Popup.Pages;assembly=Rg.Plugins.Popup"
    xmlns:local="clr-namespace:Next2"
    xmlns:pancakeview="clr-namespace:Xamarin.Forms.PancakeView;assembly=Xamarin.Forms.PancakeView"
    xmlns:buttons="clr-namespace:Next2.Controls.Buttons"
    x:Class="Next2.Views.Tablet.Dialogs.CustomerInfoDialog"
    x:DataType="dialogs:CustomerInfoViewModel">

    <pancakeview:PancakeView
        VerticalOptions="Center"
        HorizontalOptions="Center"
        HeightRequest="622"
        WidthRequest="363"
        Border="{pancakeview:BorderMarkup Color={StaticResource TextAndBackgroundColor_i2}, Thickness=2}"
        BackgroundColor="{DynamicResource TextAndBackgroundColor_i2}"
        CornerRadius="5">

        <Grid
            RowDefinitions="63, *, 74"
            RowSpacing="1.5"
            BackgroundColor="{DynamicResource TextAndBackgroundColor_i2}">

            <BoxView
                Grid.Row="0"
                BackgroundColor="{DynamicResource TextAndBackgroundColor_i3}" />

            <Label
                Grid.Row="0"
                Margin="14, 0, 0, 0"
                VerticalOptions="Center"
                FontFamily="Barlow-SemiBold"
                FontSize="{DynamicResource TSize_i6}"
                Text="{xct:Translate CustomerInfo}"
                TextColor="{DynamicResource TextAndBackgroundColor_i1}" />

            <BoxView
                Grid.Row="1"
                BackgroundColor="{DynamicResource TextAndBackgroundColor_i3}" />

            <StackLayout
                Grid.Row="1"
                Margin="20, 0">

                <StackLayout.Resources>

                    <Style x:Key="HeadLayoutStyle" TargetType="StackLayout">
                        <Setter Property="Margin" Value="0, 15, 0, 0" />
                        <Setter Property="VerticalOptions" Value="FillAndExpand" />
                        <Setter Property="Spacing" Value="4" />
                    </Style>

                    <Style x:Key="GridLayoutStyle" TargetType="StackLayout">
                        <Setter Property="VerticalOptions" Value="Center" />
                        <Setter Property="HorizontalOptions" Value="Center" />
                        <Setter Property="Margin" Value="0, 8, 0, 0" />
                    </Style>

                    <Style TargetType="Label">
                        <Setter Property="FontFamily" Value="Barlow-Medium" />
                        <Setter Property="TextColor" Value="{DynamicResource TextAndBackgroundColor_i1}" />
                        <Setter Property="FontSize" Value="{DynamicResource TSize_i8}" />
                    </Style>

                </StackLayout.Resources>

                <StackLayout Style="{DynamicResource HeadLayoutStyle}">

                    <Label
                        FontSize="{DynamicResource TSize_i9}"
                        Text="{xct:Translate CustomerName}" />

                    <Label Text="{Binding Customer.FullName}" />

                </StackLayout>

                <StackLayout Style="{DynamicResource HeadLayoutStyle}">

                    <Label
                        FontSize="{DynamicResource TSize_i9}"
                        Text="{xct:Translate Phone}" />

                    <Label Text="{Binding Customer.Phone, Converter={StaticResource formattedPhoneConverter}}" />

                </StackLayout>

                <StackLayout Style="{DynamicResource HeadLayoutStyle}">

                    <Label
                        FontSize="{DynamicResource TSize_i9}"
                        Text="{xct:Translate Email}" />

                    <Label Text="{Binding Customer.Email}" />

                </StackLayout>

                <BoxView
                    Margin="0, 18, 0, 0"
                    HeightRequest="1.5"
                    BackgroundColor="{DynamicResource TextAndBackgroundColor_i5}" />

                <Grid
                    ColumnSpacing="1.5"
                    RowSpacing="1.5"
                    Margin="0, 18, 0, 24"
                    BackgroundColor="{DynamicResource TextAndBackgroundColor_i2}">

                    <BoxView
                        Grid.Row="0"
                        Grid.Column="0"
                        BackgroundColor="{DynamicResource TextAndBackgroundColor_i3}" />

                    <StackLayout
                        Grid.Row="0"
                        Grid.Column="0"
                        Style="{DynamicResource GridLayoutStyle}"
                        Spacing="20">

                        <Label Text="{xct:Translate Points}" />

                        <Label
                            VerticalOptions="Center"
                            FontFamily="Barlow-SemiBold"
                            FontSize="{DynamicResource TSize_i6}"
                            TextColor="{DynamicResource AppColor_i1}">

                            <Label.FormattedText>
                                <FormattedString>
                                    <Span Text="{Binding Customer.Points, StringFormat='{0:D} pt'}" />
                                </FormattedString>
                            </Label.FormattedText>

                        </Label>

                    </StackLayout>

                    <BoxView
                        Grid.Row="0"
                        Grid.Column="1"
                        HeightRequest="300"
                        BackgroundColor="{DynamicResource TextAndBackgroundColor_i3}" />

                    <StackLayout
                        Grid.Row="0"
                        Grid.Column="1"
                        Style="{DynamicResource GridLayoutStyle}"
                        Spacing="18">

                        <Label Text="{xct:Translate Rewards}" />

                        <Label
                            HorizontalOptions="Center"
                            FontFamily="Barlow-Bold"
                            FontSize="{DynamicResource TSize_i4_5}"
                            Text="{Binding Customer.Rewards}"
                            TextColor="{DynamicResource IndicationColor_i7}" />

                    </StackLayout>

                    <BoxView
                        Grid.Row="1"
                        Grid.Column="0"
                        BackgroundColor="{DynamicResource TextAndBackgroundColor_i3}" />

                    <StackLayout
                        Grid.Row="1"
                        Grid.Column="0"
                        Style="{DynamicResource GridLayoutStyle}"
                        Spacing="4">

                        <Label Text="{xct:Translate NumberOf}" />

                        <Label
                            HorizontalOptions="Center"
                            Text="{xct:Translate GiftCards}" />

                        <Label
                            Margin="0, 4, 0, 0"
                            HorizontalOptions="Center"
                            FontFamily="Barlow-Bold"
                            FontSize="{DynamicResource TSize_i4_5}"
                            Text="{Binding Customer.GiftCards.Count}"
                            TextColor="{DynamicResource IndicationColor_i5}" />

                    </StackLayout>

                    <BoxView
                        Grid.Row="1"
                        Grid.Column="1"
                        BackgroundColor="{DynamicResource TextAndBackgroundColor_i3}" />

                    <StackLayout
                        Grid.Row="1"
                        Grid.Column="1"
                        Style="{DynamicResource GridLayoutStyle}"
                        Spacing="4">

                        <Label Text="{xct:Translate GiftCard}" />

                        <Label
                            HorizontalOptions="Center"
                            Text="{xct:Translate Total}" />

                        <Label
                            Margin="0, 8, 0, 0"
                            HorizontalOptions="Center"
                            FontFamily="Barlow-SemiBold"
                            FontSize="{DynamicResource TSize_i6}"
                            TextColor="{DynamicResource IndicationColor_i1}">

                            <Label.FormattedText>
                                <FormattedString>
                                    <Span Text="{xct:Translate CurrencySign}" />
                                    <Span Text=" " />
                                    <Span Text="{Binding Customer.GiftCardsTotalFund, StringFormat={Static local:Constants+Formats.PRICE_FORMAT}}" />
                                </FormattedString>
                            </Label.FormattedText>

                        </Label>

                    </StackLayout>

                </Grid>

            </StackLayout>

            <BoxView
                Grid.Row="2"
                BackgroundColor="{DynamicResource TextAndBackgroundColor_i3}" />

            <StackLayout
                Grid.Row="2"
                Margin="17"
                Orientation="Horizontal">

                <StackLayout.Resources>

                    <Style TargetType="buttons:BorderButton">
                        <Setter Property="HorizontalOptions" Value="FillAndExpand" />
                        <Setter Property="CornerRadius" Value="5" />
                        <Setter Property="WidthRequest" Value="157" />
                        <Setter Property="HeightRequest" Value="38" />
                        <Setter Property="Padding" Value="0" />
                        <Setter Property="FontFamily" Value="Barlow-SemiBold" />
                        <Setter Property="FontSize" Value="{DynamicResource TSize_i8}" />
                        <Setter Property="TextColor" Value="{DynamicResource TextAndBackgroundColor_i1}" />
                    </Style>

                </StackLayout.Resources>

                <buttons:BorderButton
                    Margin="0, 0, 5, 0"
                    BackgroundColor="{DynamicResource TextAndBackgroundColor_i3}"
                    Text="{xct:Translate Cancel}"
                    BorderColor="{DynamicResource AppColor_i1}"
                    xct:TouchEffect.Command="{Binding DeclineCommand}" />

                <buttons:BorderButton
                    Margin="5, 0, 0, 0"
                    Text="{xct:Translate Select}"
                    TextColor="{DynamicResource TextAndBackgroundColor_i3}"
                    BackgroundColor="{DynamicResource IndicationColor_i1}"
                    xct:TouchEffect.Command="{Binding AcceptCommand}" />

            </StackLayout>

        </Grid>

    </pancakeview:PancakeView>

</rg:PopupPage>